function [result] = segment()
    image = imread('../data/klimt1913.png');
    [a, b, c] = size(image);
    X = turn_into_vector(image);
    kclusters = 5;
    [label, model, llh] = emgm(X,kclusters);
    mu = model.mu;
    %spread(X,label);
    result = zeros(c, a*b);
    for i=1 : a*b
        d = 10000000000;
        best = -1;
        for j = 1 : kclusters
            if dist(mu(:, j), X(:,i)) < d
                d = dist(mu(:,j), X(:,i));
                best = j;
            end
        end
        result(:,i) = mu(:,best);
    end
    result = reshape(result', [a, b, c]);
end